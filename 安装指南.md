# 自习课噪音监控系统 - 安装指南

##  系统简介

本系统是一个基于Web的教室噪音监测系统，支持：
- 实时噪音监测和可视化
- 多班级管理
- 用户权限管理（教师、年级管理员、超级管理员）
- 自动录音录像功能
- 历史记录查询和导出
- 校园内网部署

## 快速安装

### 方法一：使用本地Web服务器（推荐）

#### Windows系统：

1. **下载并解压系统文件**
   - 将所有文件解压到一个文件夹，例如：`C:\NoiseMonitor\`

2. **使用Python内置服务器（最简单）**
   - 打开命令提示符（CMD）或PowerShell
   - 进入系统文件夹：
     ```cmd
     cd C:\NoiseMonitor
     ```
   - 运行Python服务器：
     ```cmd
     python -m http.server 8080
     ```
   - 如果没有Python，可以下载安装：https://www.python.org/downloads/

3. **访问系统**
   - 打开浏览器，访问：`http://localhost:8080`
   - 或者在同一局域网内的其他电脑访问：`http://[服务器IP]:8080`
   - 例如：`http://192.168.1.100:8080`

#### 使用Node.js（备选方案）

1. **安装Node.js**
   - 下载：https://nodejs.org/
   - 安装后打开命令提示符

2. **安装http-server**
   ```cmd
   npm install -g http-server
   ```

3. **启动服务器**
   ```cmd
   cd C:\NoiseMonitor
   http-server -p 8080
   ```

### 方法二：使用IIS（Windows服务器）

1. **启用IIS**
   - 打开"控制面板" → "程序" → "启用或关闭Windows功能"
   - 勾选"Internet Information Services"
   - 点击"确定"并等待安装完成

2. **配置网站**
   - 打开"IIS管理器"
   - 右键"网站" → "添加网站"
   - 网站名称：`NoiseMonitor`
   - 物理路径：选择系统文件夹（如 `C:\NoiseMonitor`）
   - 绑定：端口设置为 `8080`（或其他可用端口）
   - 点击"确定"

3. **访问系统**
   - 在浏览器访问：`http://localhost:8080`

### 方法三：使用Nginx（Linux/Windows）

1. **安装Nginx**
   - Windows: 下载 http://nginx.org/en/download.html
   - Linux: `sudo apt-get install nginx` (Ubuntu/Debian)

2. **配置Nginx**
   - 编辑配置文件（通常在 `nginx.conf`）
   - 添加以下配置：
   ```nginx
   server {
       listen 8080;
       server_name localhost;
       root C:/NoiseMonitor;  # 修改为实际路径
       index index.html;
       
       location / {
           try_files $uri $uri/ /index.html;
       }
   }
   ```

3. **启动Nginx**
   - Windows: 双击 `nginx.exe`
   - Linux: `sudo systemctl start nginx`

##  首次登录

1. **默认管理员账号**
   - 用户名：`admin`
   - 密码：`admin123`

2. **登录后操作**
   - 首次登录后，系统会自动创建默认管理员账号
   - 建议立即修改密码（功能开发中）
   - 创建班级和用户账号

##  使用说明

### 创建班级

1. 点击"创建新班级"按钮
2. 填写班级信息：
   - 班级名称（必填）：如"高一(1)班"
   - 班级描述（可选）
   - 所属年级（可选）
3. 点击"保存"

### 创建用户

1. 以管理员身份登录
2. 在"用户管理"面板点击"创建新用户"
3. 填写用户信息：
   - 用户名
   - 密码
   - 角色：教师 / 年级管理员 / 超级管理员
   - 真实姓名
4. 点击"保存"

### 权限说明

- **教师**：可以创建和管理自己的班级，查看自己班级的监控记录
- **年级管理员**：可以查看和管理所有班级，创建用户
- **超级管理员**：拥有所有权限

### 开始监控

1. 在班级选择器中选择要监控的班级
2. 点击"开始监控"按钮
3. 允许浏览器访问麦克风和摄像头权限
4. 系统开始实时监测噪音

##  配置说明

### 网络配置（校园内网部署）

1. **获取服务器IP地址**
   - Windows: 打开命令提示符，输入 `ipconfig`
   - Linux: 输入 `ifconfig` 或 `ip addr`
   - 找到IPv4地址，例如：`192.168.1.100`

2. **配置防火墙**
   - Windows: 在"Windows防火墙"中允许端口8080
   - 或者临时关闭防火墙进行测试

3. **局域网访问**
   - 确保所有设备在同一局域网
   - 在其他设备浏览器访问：`http://[服务器IP]:8080`

### 端口配置

- 默认端口：`8080`
- 可以修改为其他端口（80、3000、8000等）
- 确保端口未被其他程序占用

##  常见问题

### Q1: 无法访问麦克风/摄像头
**A:** 
- 检查浏览器权限设置
- Chrome: 地址栏左侧的锁图标 → 网站设置 → 允许麦克风和摄像头
- 确保使用HTTPS或localhost（某些浏览器要求）

### Q2: 其他电脑无法访问
**A:**
- 检查防火墙设置
- 确保服务器和客户端在同一局域网
- 检查IP地址是否正确

### Q3: 数据丢失
**A:**
- 数据存储在浏览器IndexedDB中
- 清除浏览器数据会导致历史记录丢失
- 建议定期导出CSV备份

### Q4: 如何备份数据
**A:**
- 使用"导出CSV"功能导出历史记录
- 浏览器数据存储在：Chrome `%LocalAppData%\Google\Chrome\User Data\Default\IndexedDB`

##  安全建议

1. **修改默认密码**
   - 首次登录后立即修改管理员密码
   - 使用强密码（包含大小写字母、数字、特殊字符）

2. **HTTPS部署（生产环境）**
   - 使用Nginx配置SSL证书
   - 或使用Let's Encrypt免费证书

3. **定期备份**
   - 定期导出历史记录
   - 备份用户数据库

##  技术支持

如遇到问题，请检查：
1. 浏览器控制台错误信息（F12）
2. 网络连接状态
3. 防火墙和端口配置

##  系统要求

- **浏览器**：Chrome 80+, Firefox 75+, Edge 80+, Safari 13+
- **操作系统**：Windows 7+, Linux, macOS
- **网络**：局域网或互联网连接
- **硬件**：麦克风（必需），摄像头（可选，用于录像）

##  功能特性

 实时噪音监测  
 多班级管理  
 用户权限系统  
 自动录音录像  
 历史记录查询  
 CSV数据导出  
 浏览器通知  
 响应式设计  